<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<!--NewPage-->
<HTML>
<HEAD>
<!-- Generated by javadoc (build 1.6.0_37) on Tue Dec 11 12:17:28 PST 2012 -->
<TITLE>
ConnectionPool
</TITLE>

<META NAME="date" CONTENT="2012-12-11">

<LINK REL ="stylesheet" TYPE="text/css" HREF="../../../../../stylesheet.css" TITLE="Style">

<SCRIPT type="text/javascript">
function windowTitle()
{
    if (location.href.indexOf('is-external=true') == -1) {
        parent.document.title="ConnectionPool";
    }
}
</SCRIPT>
<NOSCRIPT>
</NOSCRIPT>

</HEAD>

<BODY BGCOLOR="white" onload="windowTitle();">
<HR>


<!-- ========= START OF TOP NAVBAR ======= -->
<A NAME="navbar_top"><!-- --></A>
<A HREF="#skip-navbar_top" title="Skip navigation links"></A>
<TABLE BORDER="0" WIDTH="100%" CELLPADDING="1" CELLSPACING="0" SUMMARY="">
<TR>
<TD COLSPAN=2 BGCOLOR="#EEEEFF" CLASS="NavBarCell1">
<A NAME="navbar_top_firstrow"><!-- --></A>
<TABLE BORDER="0" CELLPADDING="0" CELLSPACING="3" SUMMARY="">
  <TR ALIGN="center" VALIGN="top">
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../../../overview-summary.html"><FONT CLASS="NavBarFont1"><B>Overview</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="package-summary.html"><FONT CLASS="NavBarFont1"><B>Package</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#FFFFFF" CLASS="NavBarCell1Rev"> &nbsp;<FONT CLASS="NavBarFont1Rev"><B>Class</B></FONT>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="class-use/ConnectionPool.html"><FONT CLASS="NavBarFont1"><B>Use</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="package-tree.html"><FONT CLASS="NavBarFont1"><B>Tree</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../../../deprecated-list.html"><FONT CLASS="NavBarFont1"><B>Deprecated</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../../../index-files/index-1.html"><FONT CLASS="NavBarFont1"><B>Index</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../../../help-doc.html"><FONT CLASS="NavBarFont1"><B>Help</B></FONT></A>&nbsp;</TD>
  </TR>
</TABLE>
</TD>
<TD ALIGN="right" VALIGN="top" ROWSPAN=3><EM>
</EM>
</TD>
</TR>

<TR>
<TD BGCOLOR="white" CLASS="NavBarCell2"><FONT SIZE="-2">
&nbsp;PREV CLASS&nbsp;
&nbsp;<A HREF="../../../../../org/apache/tomcat/jdbc/pool/ConnectionPool.ConnectionFuture.html" title="class in org.apache.tomcat.jdbc.pool"><B>NEXT CLASS</B></A></FONT></TD>
<TD BGCOLOR="white" CLASS="NavBarCell2"><FONT SIZE="-2">
  <A HREF="../../../../../index.html?org/apache/tomcat/jdbc/pool/ConnectionPool.html" target="_top"><B>FRAMES</B></A>  &nbsp;
&nbsp;<A HREF="ConnectionPool.html" target="_top"><B>NO FRAMES</B></A>  &nbsp;
&nbsp;<SCRIPT type="text/javascript">
  <!--
  if(window==top) {
    document.writeln('<A HREF="../../../../../allclasses-noframe.html"><B>All Classes</B></A>');
  }
  //-->
</SCRIPT>
<NOSCRIPT>
  <A HREF="../../../../../allclasses-noframe.html"><B>All Classes</B></A>
</NOSCRIPT>


</FONT></TD>
</TR>
<TR>
<TD VALIGN="top" CLASS="NavBarCell3"><FONT SIZE="-2">
  SUMMARY:&nbsp;<A HREF="#nested_class_summary">NESTED</A>&nbsp;|&nbsp;<A HREF="#field_summary">FIELD</A>&nbsp;|&nbsp;<A HREF="#constructor_summary">CONSTR</A>&nbsp;|&nbsp;<A HREF="#method_summary">METHOD</A></FONT></TD>
<TD VALIGN="top" CLASS="NavBarCell3"><FONT SIZE="-2">
DETAIL:&nbsp;<A HREF="#field_detail">FIELD</A>&nbsp;|&nbsp;<A HREF="#constructor_detail">CONSTR</A>&nbsp;|&nbsp;<A HREF="#method_detail">METHOD</A></FONT></TD>
</TR>
</TABLE>
<A NAME="skip-navbar_top"></A>
<!-- ========= END OF TOP NAVBAR ========= -->

<HR>
<!-- ======== START OF CLASS DATA ======== -->
<H2>
<FONT SIZE="-1">
org.apache.tomcat.jdbc.pool</FONT>
<BR>
Class ConnectionPool</H2>
<PRE>
java.lang.Object
  <IMG SRC="../../../../../resources/inherit.gif" ALT="extended by "><B>org.apache.tomcat.jdbc.pool.ConnectionPool</B>
</PRE>
<HR>
<DL>
<DT><PRE>public class <B>ConnectionPool</B><DT>extends java.lang.Object</DL>
</PRE>

<P>
Implementation of simple connection pool.
 The ConnectionPool uses a <A HREF="../../../../../org/apache/tomcat/jdbc/pool/PoolProperties.html" title="class in org.apache.tomcat.jdbc.pool"><CODE>PoolProperties</CODE></A> object for storing all the meta information about the connection pool.
 As the underlying implementation, the connection pool uses <CODE>BlockingQueue</CODE> to store active and idle connections.
 A custom implementation of a fair <A HREF="../../../../../org/apache/tomcat/jdbc/pool/FairBlockingQueue.html" title="class in org.apache.tomcat.jdbc.pool"><CODE>FairBlockingQueue</CODE></A> blocking queue is provided with the connection pool itself.
<P>

<P>
<DL>
<DT><B>Version:</B></DT>
  <DD>1.0</DD>
<DT><B>Author:</B></DT>
  <DD>Filip Hanik</DD>
</DL>
<HR>

<P>
<!-- ======== NESTED CLASS SUMMARY ======== -->

<A NAME="nested_class_summary"><!-- --></A>
<TABLE BORDER="1" WIDTH="100%" CELLPADDING="3" CELLSPACING="0" SUMMARY="">
<TR BGCOLOR="#CCCCFF" CLASS="TableHeadingColor">
<TH ALIGN="left" COLSPAN="2"><FONT SIZE="+2">
<B>Nested Class Summary</B></FONT></TH>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>protected &nbsp;class</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../../org/apache/tomcat/jdbc/pool/ConnectionPool.ConnectionFuture.html" title="class in org.apache.tomcat.jdbc.pool">ConnectionPool.ConnectionFuture</A></B></CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Tread safe wrapper around a future for the regular queue
 This one retrieves the pooled connection object
 and performs the initialization according to
 interceptors and validation rules.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>protected static&nbsp;class</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../../org/apache/tomcat/jdbc/pool/ConnectionPool.PoolCleaner.html" title="class in org.apache.tomcat.jdbc.pool">ConnectionPool.PoolCleaner</A></B></CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</TD>
</TR>
</TABLE>
&nbsp;<!-- =========== FIELD SUMMARY =========== -->

<A NAME="field_summary"><!-- --></A>
<TABLE BORDER="1" WIDTH="100%" CELLPADDING="3" CELLSPACING="0" SUMMARY="">
<TR BGCOLOR="#CCCCFF" CLASS="TableHeadingColor">
<TH ALIGN="left" COLSPAN="2"><FONT SIZE="+2">
<B>Field Summary</B></FONT></TH>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>private &nbsp;java.util.concurrent.BlockingQueue&lt;<A HREF="../../../../../org/apache/tomcat/jdbc/pool/PooledConnection.html" title="class in org.apache.tomcat.jdbc.pool">PooledConnection</A>&gt;</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../../org/apache/tomcat/jdbc/pool/ConnectionPool.html#busy">busy</A></B></CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Contains all the connections that are in use
 TODO - this shouldn't be a blocking queue, simply a list to hold our objects</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>private &nbsp;java.util.concurrent.ThreadPoolExecutor</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../../org/apache/tomcat/jdbc/pool/ConnectionPool.html#cancellator">cancellator</A></B></CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Executor service used to cancel Futures</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>private static&nbsp;java.util.HashSet&lt;<A HREF="../../../../../org/apache/tomcat/jdbc/pool/ConnectionPool.PoolCleaner.html" title="class in org.apache.tomcat.jdbc.pool">ConnectionPool.PoolCleaner</A>&gt;</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../../org/apache/tomcat/jdbc/pool/ConnectionPool.html#cleaners">cleaners</A></B></CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>private &nbsp;boolean</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../../org/apache/tomcat/jdbc/pool/ConnectionPool.html#closed">closed</A></B></CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Pool closed flag</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>private &nbsp;java.util.concurrent.BlockingQueue&lt;<A HREF="../../../../../org/apache/tomcat/jdbc/pool/PooledConnection.html" title="class in org.apache.tomcat.jdbc.pool">PooledConnection</A>&gt;</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../../org/apache/tomcat/jdbc/pool/ConnectionPool.html#idle">idle</A></B></CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Contains all the idle connections</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>protected &nbsp;<A HREF="../../../../../org/apache/tomcat/jdbc/pool/jmx/ConnectionPool.html" title="class in org.apache.tomcat.jdbc.pool.jmx">ConnectionPool</A></CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../../org/apache/tomcat/jdbc/pool/ConnectionPool.html#jmxPool">jmxPool</A></B></CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;reference to the JMX mbean</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>private static&nbsp;org.apache.log4j.Logger</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../../org/apache/tomcat/jdbc/pool/ConnectionPool.html#log">log</A></B></CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Logger</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>static&nbsp;java.lang.String</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../../org/apache/tomcat/jdbc/pool/ConnectionPool.html#POOL_JMX_DOMAIN">POOL_JMX_DOMAIN</A></B></CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Default domain for objects registering with an mbean server</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>static&nbsp;java.lang.String</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../../org/apache/tomcat/jdbc/pool/ConnectionPool.html#POOL_JMX_TYPE_PREFIX">POOL_JMX_TYPE_PREFIX</A></B></CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Prefix type for JMX registration</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>private &nbsp;<A HREF="../../../../../org/apache/tomcat/jdbc/pool/ConnectionPool.PoolCleaner.html" title="class in org.apache.tomcat.jdbc.pool">ConnectionPool.PoolCleaner</A></CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../../org/apache/tomcat/jdbc/pool/ConnectionPool.html#poolCleaner">poolCleaner</A></B></CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;The thread that is responsible for checking abandoned and idle threads</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>private static&nbsp;java.util.Timer</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../../org/apache/tomcat/jdbc/pool/ConnectionPool.html#poolCleanTimer">poolCleanTimer</A></B></CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>private &nbsp;<A HREF="../../../../../org/apache/tomcat/jdbc/pool/PoolConfiguration.html" title="interface in org.apache.tomcat.jdbc.pool">PoolConfiguration</A></CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../../org/apache/tomcat/jdbc/pool/ConnectionPool.html#poolProperties">poolProperties</A></B></CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;All the information about the connection pool
 These are the properties the pool got instantiated with</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>private &nbsp;java.util.concurrent.atomic.AtomicLong</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../../org/apache/tomcat/jdbc/pool/ConnectionPool.html#poolVersion">poolVersion</A></B></CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>private &nbsp;java.lang.reflect.Constructor&lt;?&gt;</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../../org/apache/tomcat/jdbc/pool/ConnectionPool.html#proxyClassConstructor">proxyClassConstructor</A></B></CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Since newProxyInstance performs the same operation, over and over
 again, it is much more optimized if we simply store the constructor ourselves.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>private &nbsp;java.util.concurrent.atomic.AtomicInteger</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../../org/apache/tomcat/jdbc/pool/ConnectionPool.html#size">size</A></B></CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Carries the size of the pool, instead of relying on a queue implementation
 that usually iterates over to get an exact count</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>private &nbsp;java.util.concurrent.atomic.AtomicInteger</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../../org/apache/tomcat/jdbc/pool/ConnectionPool.html#waitcount">waitcount</A></B></CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;counter to track how many threads are waiting for a connection</TD>
</TR>
</TABLE>
&nbsp;
<!-- ======== CONSTRUCTOR SUMMARY ======== -->

<A NAME="constructor_summary"><!-- --></A>
<TABLE BORDER="1" WIDTH="100%" CELLPADDING="3" CELLSPACING="0" SUMMARY="">
<TR BGCOLOR="#CCCCFF" CLASS="TableHeadingColor">
<TH ALIGN="left" COLSPAN="2"><FONT SIZE="+2">
<B>Constructor Summary</B></FONT></TH>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD><CODE><B><A HREF="../../../../../org/apache/tomcat/jdbc/pool/ConnectionPool.html#ConnectionPool(org.apache.tomcat.jdbc.pool.PoolConfiguration)">ConnectionPool</A></B>(<A HREF="../../../../../org/apache/tomcat/jdbc/pool/PoolConfiguration.html" title="interface in org.apache.tomcat.jdbc.pool">PoolConfiguration</A>&nbsp;prop)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Instantiate a connection pool.</TD>
</TR>
</TABLE>
&nbsp;
<!-- ========== METHOD SUMMARY =========== -->

<A NAME="method_summary"><!-- --></A>
<TABLE BORDER="1" WIDTH="100%" CELLPADDING="3" CELLSPACING="0" SUMMARY="">
<TR BGCOLOR="#CCCCFF" CLASS="TableHeadingColor">
<TH ALIGN="left" COLSPAN="2"><FONT SIZE="+2">
<B>Method Summary</B></FONT></TH>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>protected &nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../../org/apache/tomcat/jdbc/pool/ConnectionPool.html#abandon(org.apache.tomcat.jdbc.pool.PooledConnection)">abandon</A></B>(<A HREF="../../../../../org/apache/tomcat/jdbc/pool/PooledConnection.html" title="class in org.apache.tomcat.jdbc.pool">PooledConnection</A>&nbsp;con)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;thread safe way to abandon a connection
 signals a connection to be abandoned.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>private &nbsp;<A HREF="../../../../../org/apache/tomcat/jdbc/pool/PooledConnection.html" title="class in org.apache.tomcat.jdbc.pool">PooledConnection</A></CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../../org/apache/tomcat/jdbc/pool/ConnectionPool.html#borrowConnection(int, java.lang.String, java.lang.String)">borrowConnection</A></B>(int&nbsp;wait,
                 java.lang.String&nbsp;username,
                 java.lang.String&nbsp;password)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Thread safe way to retrieve a connection from the pool</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>protected &nbsp;<A HREF="../../../../../org/apache/tomcat/jdbc/pool/PooledConnection.html" title="class in org.apache.tomcat.jdbc.pool">PooledConnection</A></CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../../org/apache/tomcat/jdbc/pool/ConnectionPool.html#borrowConnection(long, org.apache.tomcat.jdbc.pool.PooledConnection, java.lang.String, java.lang.String)">borrowConnection</A></B>(long&nbsp;now,
                 <A HREF="../../../../../org/apache/tomcat/jdbc/pool/PooledConnection.html" title="class in org.apache.tomcat.jdbc.pool">PooledConnection</A>&nbsp;con,
                 java.lang.String&nbsp;username,
                 java.lang.String&nbsp;password)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Validates and configures a previously idle connection</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../../org/apache/tomcat/jdbc/pool/ConnectionPool.html#checkAbandoned()">checkAbandoned</A></B>()</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Iterates through all the busy connections and checks for connections that have timed out</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../../org/apache/tomcat/jdbc/pool/ConnectionPool.html#checkIdle()">checkIdle</A></B>()</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Iterates through the idle connections and resizes the idle pool based on parameters
 <A HREF="../../../../../org/apache/tomcat/jdbc/pool/PoolProperties.html#maxIdle"><CODE>PoolProperties.maxIdle</CODE></A>, <A HREF="../../../../../org/apache/tomcat/jdbc/pool/PoolProperties.html#minIdle"><CODE>PoolProperties.minIdle</CODE></A>, <A HREF="../../../../../org/apache/tomcat/jdbc/pool/PoolProperties.html#minEvictableIdleTimeMillis"><CODE>PoolProperties.minEvictableIdleTimeMillis</CODE></A></TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../../org/apache/tomcat/jdbc/pool/ConnectionPool.html#checkIdle(boolean)">checkIdle</A></B>(boolean&nbsp;ignoreMinSize)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>protected &nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../../org/apache/tomcat/jdbc/pool/ConnectionPool.html#close(boolean)">close</A></B>(boolean&nbsp;force)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Closes the pool and all disconnects all idle connections
 Active connections will be closed upon the <CODE>close</CODE> method is called
 on the underlying connection instead of being returned to the pool</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>protected &nbsp;<A HREF="../../../../../org/apache/tomcat/jdbc/pool/PooledConnection.html" title="class in org.apache.tomcat.jdbc.pool">PooledConnection</A></CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../../org/apache/tomcat/jdbc/pool/ConnectionPool.html#create(boolean)">create</A></B>(boolean&nbsp;incrementCounter)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Create a new pooled connection object.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>protected &nbsp;<A HREF="../../../../../org/apache/tomcat/jdbc/pool/PooledConnection.html" title="class in org.apache.tomcat.jdbc.pool">PooledConnection</A></CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../../org/apache/tomcat/jdbc/pool/ConnectionPool.html#createConnection(long, org.apache.tomcat.jdbc.pool.PooledConnection, java.lang.String, java.lang.String)">createConnection</A></B>(long&nbsp;now,
                 <A HREF="../../../../../org/apache/tomcat/jdbc/pool/PooledConnection.html" title="class in org.apache.tomcat.jdbc.pool">PooledConnection</A>&nbsp;notUsed,
                 java.lang.String&nbsp;username,
                 java.lang.String&nbsp;password)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Creates a JDBC connection and tries to connect to the database.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>protected &nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../../org/apache/tomcat/jdbc/pool/ConnectionPool.html#createMBean()">createMBean</A></B>()</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Create MBean object that can be registered.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>protected &nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../../org/apache/tomcat/jdbc/pool/ConnectionPool.html#disconnectEvent(org.apache.tomcat.jdbc.pool.PooledConnection, boolean)">disconnectEvent</A></B>(<A HREF="../../../../../org/apache/tomcat/jdbc/pool/PooledConnection.html" title="class in org.apache.tomcat.jdbc.pool">PooledConnection</A>&nbsp;con,
                boolean&nbsp;finalizing)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Hook to perform final actions on a pooled connection object once it has been disconnected and will be discarded</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>protected &nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../../org/apache/tomcat/jdbc/pool/ConnectionPool.html#finalize(org.apache.tomcat.jdbc.pool.PooledConnection)">finalize</A></B>(<A HREF="../../../../../org/apache/tomcat/jdbc/pool/PooledConnection.html" title="class in org.apache.tomcat.jdbc.pool">PooledConnection</A>&nbsp;con)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Hook to perform final actions on a pooled connection object once it has been disconnected and will be discarded</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;int</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../../org/apache/tomcat/jdbc/pool/ConnectionPool.html#getActive()">getActive</A></B>()</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Returns the number of connections that are in use</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;java.sql.Connection</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../../org/apache/tomcat/jdbc/pool/ConnectionPool.html#getConnection()">getConnection</A></B>()</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Borrows a connection from the pool.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;java.sql.Connection</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../../org/apache/tomcat/jdbc/pool/ConnectionPool.html#getConnection(java.lang.String, java.lang.String)">getConnection</A></B>(java.lang.String&nbsp;username,
              java.lang.String&nbsp;password)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Borrows a connection from the pool.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;java.util.concurrent.Future&lt;java.sql.Connection&gt;</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../../org/apache/tomcat/jdbc/pool/ConnectionPool.html#getConnectionAsync()">getConnectionAsync</A></B>()</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Retrieves a Connection future.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;int</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../../org/apache/tomcat/jdbc/pool/ConnectionPool.html#getIdle()">getIdle</A></B>()</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Returns the number of idle connections</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;<A HREF="../../../../../org/apache/tomcat/jdbc/pool/jmx/ConnectionPool.html" title="class in org.apache.tomcat.jdbc.pool.jmx">ConnectionPool</A></CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../../org/apache/tomcat/jdbc/pool/ConnectionPool.html#getJmxPool()">getJmxPool</A></B>()</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Return the object that is potentially registered in JMX for notifications</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;java.lang.String</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../../org/apache/tomcat/jdbc/pool/ConnectionPool.html#getName()">getName</A></B>()</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Returns the name of this pool</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>static&nbsp;java.util.Set&lt;java.util.TimerTask&gt;</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../../org/apache/tomcat/jdbc/pool/ConnectionPool.html#getPoolCleaners()">getPoolCleaners</A></B>()</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;<A HREF="../../../../../org/apache/tomcat/jdbc/pool/PoolConfiguration.html" title="interface in org.apache.tomcat.jdbc.pool">PoolConfiguration</A></CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../../org/apache/tomcat/jdbc/pool/ConnectionPool.html#getPoolProperties()">getPoolProperties</A></B>()</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Returns the pool properties associated with this connection pool</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>static&nbsp;java.util.Timer</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../../org/apache/tomcat/jdbc/pool/ConnectionPool.html#getPoolTimer()">getPoolTimer</A></B>()</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;long</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../../org/apache/tomcat/jdbc/pool/ConnectionPool.html#getPoolVersion()">getPoolVersion</A></B>()</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;java.lang.reflect.Constructor&lt;?&gt;</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../../org/apache/tomcat/jdbc/pool/ConnectionPool.html#getProxyConstructor(boolean)">getProxyConstructor</A></B>(boolean&nbsp;xa)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Creates and caches a <CODE>Constructor</CODE> used to instantiate the proxy object.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;int</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../../org/apache/tomcat/jdbc/pool/ConnectionPool.html#getSize()">getSize</A></B>()</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Returns the total size of this pool, this includes both busy and idle connections</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>static&nbsp;java.lang.String</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../../org/apache/tomcat/jdbc/pool/ConnectionPool.html#getStackTrace(java.lang.Throwable)">getStackTrace</A></B>(java.lang.Throwable&nbsp;x)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Convert an exception into a String</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>protected static&nbsp;java.lang.String</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../../org/apache/tomcat/jdbc/pool/ConnectionPool.html#getThreadDump()">getThreadDump</A></B>()</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Creates a stack trace representing the existing thread's current state.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;int</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../../org/apache/tomcat/jdbc/pool/ConnectionPool.html#getWaitCount()">getWaitCount</A></B>()</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Return the number of threads waiting for a connection</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>protected &nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../../org/apache/tomcat/jdbc/pool/ConnectionPool.html#init(org.apache.tomcat.jdbc.pool.PoolConfiguration)">init</A></B>(<A HREF="../../../../../org/apache/tomcat/jdbc/pool/PoolConfiguration.html" title="interface in org.apache.tomcat.jdbc.pool">PoolConfiguration</A>&nbsp;properties)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Initialize the connection pool - called from the constructor</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../../org/apache/tomcat/jdbc/pool/ConnectionPool.html#initializePoolCleaner(org.apache.tomcat.jdbc.pool.PoolConfiguration)">initializePoolCleaner</A></B>(<A HREF="../../../../../org/apache/tomcat/jdbc/pool/PoolConfiguration.html" title="interface in org.apache.tomcat.jdbc.pool">PoolConfiguration</A>&nbsp;properties)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;boolean</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../../org/apache/tomcat/jdbc/pool/ConnectionPool.html#isClosed()">isClosed</A></B>()</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Returns true if <A HREF="../../../../../org/apache/tomcat/jdbc/pool/ConnectionPool.html#close(boolean)"><CODE>close</CODE></A> has been called, and the connection pool is unusable</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../../org/apache/tomcat/jdbc/pool/ConnectionPool.html#purge()">purge</A></B>()</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Purges all connections in the pool.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../../org/apache/tomcat/jdbc/pool/ConnectionPool.html#purgeOnReturn()">purgeOnReturn</A></B>()</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Purges connections when they are returned from the pool.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>private static&nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../../org/apache/tomcat/jdbc/pool/ConnectionPool.html#registerCleaner(org.apache.tomcat.jdbc.pool.ConnectionPool.PoolCleaner)">registerCleaner</A></B>(<A HREF="../../../../../org/apache/tomcat/jdbc/pool/ConnectionPool.PoolCleaner.html" title="class in org.apache.tomcat.jdbc.pool">ConnectionPool.PoolCleaner</A>&nbsp;cleaner)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>protected &nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../../org/apache/tomcat/jdbc/pool/ConnectionPool.html#release(org.apache.tomcat.jdbc.pool.PooledConnection)">release</A></B>(<A HREF="../../../../../org/apache/tomcat/jdbc/pool/PooledConnection.html" title="class in org.apache.tomcat.jdbc.pool">PooledConnection</A>&nbsp;con)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;thread safe way to release a connection</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>protected &nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../../org/apache/tomcat/jdbc/pool/ConnectionPool.html#returnConnection(org.apache.tomcat.jdbc.pool.PooledConnection)">returnConnection</A></B>(<A HREF="../../../../../org/apache/tomcat/jdbc/pool/PooledConnection.html" title="class in org.apache.tomcat.jdbc.pool">PooledConnection</A>&nbsp;con)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Returns a connection to the pool
 If the pool is closed, the connection will be released
 If the connection is not part of the busy queue, it will be released.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>protected &nbsp;java.sql.Connection</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../../org/apache/tomcat/jdbc/pool/ConnectionPool.html#setupConnection(org.apache.tomcat.jdbc.pool.PooledConnection)">setupConnection</A></B>(<A HREF="../../../../../org/apache/tomcat/jdbc/pool/PooledConnection.html" title="class in org.apache.tomcat.jdbc.pool">PooledConnection</A>&nbsp;con)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;configures a pooled connection as a proxy.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>protected &nbsp;boolean</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../../org/apache/tomcat/jdbc/pool/ConnectionPool.html#shouldAbandon()">shouldAbandon</A></B>()</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Determines if a connection should be abandoned based on
 <A HREF="../../../../../org/apache/tomcat/jdbc/pool/PoolProperties.html#abandonWhenPercentageFull"><CODE>PoolProperties.abandonWhenPercentageFull</CODE></A> setting.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>protected &nbsp;boolean</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../../org/apache/tomcat/jdbc/pool/ConnectionPool.html#shouldClose(org.apache.tomcat.jdbc.pool.PooledConnection, int)">shouldClose</A></B>(<A HREF="../../../../../org/apache/tomcat/jdbc/pool/PooledConnection.html" title="class in org.apache.tomcat.jdbc.pool">PooledConnection</A>&nbsp;con,
            int&nbsp;action)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Determines if a connection should be closed upon return to the pool.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>protected &nbsp;boolean</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../../org/apache/tomcat/jdbc/pool/ConnectionPool.html#shouldReleaseIdle(long, org.apache.tomcat.jdbc.pool.PooledConnection, long)">shouldReleaseIdle</A></B>(long&nbsp;now,
                  <A HREF="../../../../../org/apache/tomcat/jdbc/pool/PooledConnection.html" title="class in org.apache.tomcat.jdbc.pool">PooledConnection</A>&nbsp;con,
                  long&nbsp;time)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>protected &nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../../org/apache/tomcat/jdbc/pool/ConnectionPool.html#suspect(org.apache.tomcat.jdbc.pool.PooledConnection)">suspect</A></B>(<A HREF="../../../../../org/apache/tomcat/jdbc/pool/PooledConnection.html" title="class in org.apache.tomcat.jdbc.pool">PooledConnection</A>&nbsp;con)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;thread safe way to abandon a connection
 signals a connection to be abandoned.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>protected &nbsp;boolean</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../../org/apache/tomcat/jdbc/pool/ConnectionPool.html#terminateTransaction(org.apache.tomcat.jdbc.pool.PooledConnection)">terminateTransaction</A></B>(<A HREF="../../../../../org/apache/tomcat/jdbc/pool/PooledConnection.html" title="class in org.apache.tomcat.jdbc.pool">PooledConnection</A>&nbsp;con)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Terminate the current transaction for the given connection.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../../org/apache/tomcat/jdbc/pool/ConnectionPool.html#testAllIdle()">testAllIdle</A></B>()</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Forces a validation of all idle connections if <A HREF="../../../../../org/apache/tomcat/jdbc/pool/PoolProperties.html#testWhileIdle"><CODE>PoolProperties.testWhileIdle</CODE></A> is set.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>private static&nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../../org/apache/tomcat/jdbc/pool/ConnectionPool.html#unregisterCleaner(org.apache.tomcat.jdbc.pool.ConnectionPool.PoolCleaner)">unregisterCleaner</A></B>(<A HREF="../../../../../org/apache/tomcat/jdbc/pool/ConnectionPool.PoolCleaner.html" title="class in org.apache.tomcat.jdbc.pool">ConnectionPool.PoolCleaner</A>&nbsp;cleaner)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</TD>
</TR>
</TABLE>
&nbsp;<A NAME="methods_inherited_from_class_java.lang.Object"><!-- --></A>
<TABLE BORDER="1" WIDTH="100%" CELLPADDING="3" CELLSPACING="0" SUMMARY="">
<TR BGCOLOR="#EEEEFF" CLASS="TableSubHeadingColor">
<TH ALIGN="left"><B>Methods inherited from class java.lang.Object</B></TH>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD><CODE>clone, equals, finalize, getClass, hashCode, notify, notifyAll, toString, wait, wait, wait</CODE></TD>
</TR>
</TABLE>
&nbsp;
<P>

<!-- ============ FIELD DETAIL =========== -->

<A NAME="field_detail"><!-- --></A>
<TABLE BORDER="1" WIDTH="100%" CELLPADDING="3" CELLSPACING="0" SUMMARY="">
<TR BGCOLOR="#CCCCFF" CLASS="TableHeadingColor">
<TH ALIGN="left" COLSPAN="1"><FONT SIZE="+2">
<B>Field Detail</B></FONT></TH>
</TR>
</TABLE>

<A NAME="POOL_JMX_DOMAIN"><!-- --></A><H3>
POOL_JMX_DOMAIN</H3>
<PRE>
public static final java.lang.String <B>POOL_JMX_DOMAIN</B></PRE>
<DL>
<DD>Default domain for objects registering with an mbean server
<P>
<DL>
<DT><B>See Also:</B><DD><A HREF="../../../../../constant-values.html#org.apache.tomcat.jdbc.pool.ConnectionPool.POOL_JMX_DOMAIN">Constant Field Values</A></DL>
</DL>
<HR>

<A NAME="POOL_JMX_TYPE_PREFIX"><!-- --></A><H3>
POOL_JMX_TYPE_PREFIX</H3>
<PRE>
public static final java.lang.String <B>POOL_JMX_TYPE_PREFIX</B></PRE>
<DL>
<DD>Prefix type for JMX registration
<P>
<DL>
<DT><B>See Also:</B><DD><A HREF="../../../../../constant-values.html#org.apache.tomcat.jdbc.pool.ConnectionPool.POOL_JMX_TYPE_PREFIX">Constant Field Values</A></DL>
</DL>
<HR>

<A NAME="log"><!-- --></A><H3>
log</H3>
<PRE>
private static final org.apache.log4j.Logger <B>log</B></PRE>
<DL>
<DD>Logger
<P>
<DL>
</DL>
</DL>
<HR>

<A NAME="size"><!-- --></A><H3>
size</H3>
<PRE>
private java.util.concurrent.atomic.AtomicInteger <B>size</B></PRE>
<DL>
<DD>Carries the size of the pool, instead of relying on a queue implementation
 that usually iterates over to get an exact count
<P>
<DL>
</DL>
</DL>
<HR>

<A NAME="poolProperties"><!-- --></A><H3>
poolProperties</H3>
<PRE>
private <A HREF="../../../../../org/apache/tomcat/jdbc/pool/PoolConfiguration.html" title="interface in org.apache.tomcat.jdbc.pool">PoolConfiguration</A> <B>poolProperties</B></PRE>
<DL>
<DD>All the information about the connection pool
 These are the properties the pool got instantiated with
<P>
<DL>
</DL>
</DL>
<HR>

<A NAME="busy"><!-- --></A><H3>
busy</H3>
<PRE>
private java.util.concurrent.BlockingQueue&lt;<A HREF="../../../../../org/apache/tomcat/jdbc/pool/PooledConnection.html" title="class in org.apache.tomcat.jdbc.pool">PooledConnection</A>&gt; <B>busy</B></PRE>
<DL>
<DD>Contains all the connections that are in use
 TODO - this shouldn't be a blocking queue, simply a list to hold our objects
<P>
<DL>
</DL>
</DL>
<HR>

<A NAME="idle"><!-- --></A><H3>
idle</H3>
<PRE>
private java.util.concurrent.BlockingQueue&lt;<A HREF="../../../../../org/apache/tomcat/jdbc/pool/PooledConnection.html" title="class in org.apache.tomcat.jdbc.pool">PooledConnection</A>&gt; <B>idle</B></PRE>
<DL>
<DD>Contains all the idle connections
<P>
<DL>
</DL>
</DL>
<HR>

<A NAME="poolCleaner"><!-- --></A><H3>
poolCleaner</H3>
<PRE>
private volatile <A HREF="../../../../../org/apache/tomcat/jdbc/pool/ConnectionPool.PoolCleaner.html" title="class in org.apache.tomcat.jdbc.pool">ConnectionPool.PoolCleaner</A> <B>poolCleaner</B></PRE>
<DL>
<DD>The thread that is responsible for checking abandoned and idle threads
<P>
<DL>
</DL>
</DL>
<HR>

<A NAME="closed"><!-- --></A><H3>
closed</H3>
<PRE>
private volatile boolean <B>closed</B></PRE>
<DL>
<DD>Pool closed flag
<P>
<DL>
</DL>
</DL>
<HR>

<A NAME="proxyClassConstructor"><!-- --></A><H3>
proxyClassConstructor</H3>
<PRE>
private java.lang.reflect.Constructor&lt;?&gt; <B>proxyClassConstructor</B></PRE>
<DL>
<DD>Since newProxyInstance performs the same operation, over and over
 again, it is much more optimized if we simply store the constructor ourselves.
<P>
<DL>
</DL>
</DL>
<HR>

<A NAME="cancellator"><!-- --></A><H3>
cancellator</H3>
<PRE>
private java.util.concurrent.ThreadPoolExecutor <B>cancellator</B></PRE>
<DL>
<DD>Executor service used to cancel Futures
<P>
<DL>
</DL>
</DL>
<HR>

<A NAME="jmxPool"><!-- --></A><H3>
jmxPool</H3>
<PRE>
protected <A HREF="../../../../../org/apache/tomcat/jdbc/pool/jmx/ConnectionPool.html" title="class in org.apache.tomcat.jdbc.pool.jmx">ConnectionPool</A> <B>jmxPool</B></PRE>
<DL>
<DD>reference to the JMX mbean
<P>
<DL>
</DL>
</DL>
<HR>

<A NAME="waitcount"><!-- --></A><H3>
waitcount</H3>
<PRE>
private java.util.concurrent.atomic.AtomicInteger <B>waitcount</B></PRE>
<DL>
<DD>counter to track how many threads are waiting for a connection
<P>
<DL>
</DL>
</DL>
<HR>

<A NAME="poolVersion"><!-- --></A><H3>
poolVersion</H3>
<PRE>
private java.util.concurrent.atomic.AtomicLong <B>poolVersion</B></PRE>
<DL>
<DL>
</DL>
</DL>
<HR>

<A NAME="poolCleanTimer"><!-- --></A><H3>
poolCleanTimer</H3>
<PRE>
private static volatile java.util.Timer <B>poolCleanTimer</B></PRE>
<DL>
<DL>
</DL>
</DL>
<HR>

<A NAME="cleaners"><!-- --></A><H3>
cleaners</H3>
<PRE>
private static java.util.HashSet&lt;<A HREF="../../../../../org/apache/tomcat/jdbc/pool/ConnectionPool.PoolCleaner.html" title="class in org.apache.tomcat.jdbc.pool">ConnectionPool.PoolCleaner</A>&gt; <B>cleaners</B></PRE>
<DL>
<DL>
</DL>
</DL>

<!-- ========= CONSTRUCTOR DETAIL ======== -->

<A NAME="constructor_detail"><!-- --></A>
<TABLE BORDER="1" WIDTH="100%" CELLPADDING="3" CELLSPACING="0" SUMMARY="">
<TR BGCOLOR="#CCCCFF" CLASS="TableHeadingColor">
<TH ALIGN="left" COLSPAN="1"><FONT SIZE="+2">
<B>Constructor Detail</B></FONT></TH>
</TR>
</TABLE>

<A NAME="ConnectionPool(org.apache.tomcat.jdbc.pool.PoolConfiguration)"><!-- --></A><H3>
ConnectionPool</H3>
<PRE>
public <B>ConnectionPool</B>(<A HREF="../../../../../org/apache/tomcat/jdbc/pool/PoolConfiguration.html" title="interface in org.apache.tomcat.jdbc.pool">PoolConfiguration</A>&nbsp;prop)
               throws java.sql.SQLException</PRE>
<DL>
<DD>Instantiate a connection pool. This will create connections if initialSize is larger than 0.
 The <A HREF="../../../../../org/apache/tomcat/jdbc/pool/PoolProperties.html" title="class in org.apache.tomcat.jdbc.pool"><CODE>PoolProperties</CODE></A> should not be reused for another connection pool.
<P>
<DL>
<DT><B>Parameters:</B><DD><CODE>prop</CODE> - PoolProperties - all the properties for this connection pool
<DT><B>Throws:</B>
<DD><CODE>java.sql.SQLException</CODE></DL>
</DL>

<!-- ============ METHOD DETAIL ========== -->

<A NAME="method_detail"><!-- --></A>
<TABLE BORDER="1" WIDTH="100%" CELLPADDING="3" CELLSPACING="0" SUMMARY="">
<TR BGCOLOR="#CCCCFF" CLASS="TableHeadingColor">
<TH ALIGN="left" COLSPAN="1"><FONT SIZE="+2">
<B>Method Detail</B></FONT></TH>
</TR>
</TABLE>

<A NAME="getConnectionAsync()"><!-- --></A><H3>
getConnectionAsync</H3>
<PRE>
public java.util.concurrent.Future&lt;java.sql.Connection&gt; <B>getConnectionAsync</B>()
                                                                    throws java.sql.SQLException</PRE>
<DL>
<DD>Retrieves a Connection future. If a connection is not available, one can block using future.get()
 until a connection has become available.
 If a connection is not retrieved, the Future must be cancelled in order for the connection to be returned
 to the pool.
<P>
<DD><DL>

<DT><B>Returns:</B><DD>a Future containing a reference to the connection or the future connection
<DT><B>Throws:</B>
<DD><CODE>java.sql.SQLException</CODE></DL>
</DD>
</DL>
<HR>

<A NAME="getConnection()"><!-- --></A><H3>
getConnection</H3>
<PRE>
public java.sql.Connection <B>getConnection</B>()
                                  throws java.sql.SQLException</PRE>
<DL>
<DD>Borrows a connection from the pool. If a connection is available (in the idle queue) or the pool has not reached
 <A HREF="../../../../../org/apache/tomcat/jdbc/pool/PoolProperties.html#maxActive"><CODE>maxActive</CODE></A> connections a connection is returned immediately.
 If no connection is available, the pool will attempt to fetch a connection for <A HREF="../../../../../org/apache/tomcat/jdbc/pool/PoolProperties.html#maxWait"><CODE>maxWait</CODE></A> milliseconds.
<P>
<DD><DL>

<DT><B>Returns:</B><DD>Connection - a java.sql.Connection/javax.sql.PooledConnection reflection proxy, wrapping the underlying object.
<DT><B>Throws:</B>
<DD><CODE>java.sql.SQLException</CODE> - - if the wait times out or a failure occurs creating a connection</DL>
</DD>
</DL>
<HR>

<A NAME="getConnection(java.lang.String, java.lang.String)"><!-- --></A><H3>
getConnection</H3>
<PRE>
public java.sql.Connection <B>getConnection</B>(java.lang.String&nbsp;username,
                                         java.lang.String&nbsp;password)
                                  throws java.sql.SQLException</PRE>
<DL>
<DD>Borrows a connection from the pool. If a connection is available (in the
 idle queue) or the pool has not reached <A HREF="../../../../../org/apache/tomcat/jdbc/pool/PoolProperties.html#maxActive"><CODE>maxActive</CODE></A> connections a connection is returned immediately. If no
 connection is available, the pool will attempt to fetch a connection for
 <A HREF="../../../../../org/apache/tomcat/jdbc/pool/PoolProperties.html#maxWait"><CODE>maxWait</CODE></A> milliseconds.
<P>
<DD><DL>

<DT><B>Returns:</B><DD>Connection - a java.sql.Connection/javax.sql.PooledConnection
         reflection proxy, wrapping the underlying object.
<DT><B>Throws:</B>
<DD><CODE>java.sql.SQLException</CODE> - - if the wait times out or a failure occurs creating a
             connection</DL>
</DD>
</DL>
<HR>

<A NAME="getName()"><!-- --></A><H3>
getName</H3>
<PRE>
public java.lang.String <B>getName</B>()</PRE>
<DL>
<DD>Returns the name of this pool
<P>
<DD><DL>

<DT><B>Returns:</B><DD>String - the name of the pool</DL>
</DD>
</DL>
<HR>

<A NAME="getWaitCount()"><!-- --></A><H3>
getWaitCount</H3>
<PRE>
public int <B>getWaitCount</B>()</PRE>
<DL>
<DD>Return the number of threads waiting for a connection
<P>
<DD><DL>

<DT><B>Returns:</B><DD>number of threads waiting for a connection</DL>
</DD>
</DL>
<HR>

<A NAME="getPoolProperties()"><!-- --></A><H3>
getPoolProperties</H3>
<PRE>
public <A HREF="../../../../../org/apache/tomcat/jdbc/pool/PoolConfiguration.html" title="interface in org.apache.tomcat.jdbc.pool">PoolConfiguration</A> <B>getPoolProperties</B>()</PRE>
<DL>
<DD>Returns the pool properties associated with this connection pool
<P>
<DD><DL>

<DT><B>Returns:</B><DD>PoolProperties</DL>
</DD>
</DL>
<HR>

<A NAME="getSize()"><!-- --></A><H3>
getSize</H3>
<PRE>
public int <B>getSize</B>()</PRE>
<DL>
<DD>Returns the total size of this pool, this includes both busy and idle connections
<P>
<DD><DL>

<DT><B>Returns:</B><DD>int - number of established connections to the database</DL>
</DD>
</DL>
<HR>

<A NAME="getActive()"><!-- --></A><H3>
getActive</H3>
<PRE>
public int <B>getActive</B>()</PRE>
<DL>
<DD>Returns the number of connections that are in use
<P>
<DD><DL>

<DT><B>Returns:</B><DD>int - number of established connections that are being used by the application</DL>
</DD>
</DL>
<HR>

<A NAME="getIdle()"><!-- --></A><H3>
getIdle</H3>
<PRE>
public int <B>getIdle</B>()</PRE>
<DL>
<DD>Returns the number of idle connections
<P>
<DD><DL>

<DT><B>Returns:</B><DD>int - number of established connections not being used</DL>
</DD>
</DL>
<HR>

<A NAME="isClosed()"><!-- --></A><H3>
isClosed</H3>
<PRE>
public boolean <B>isClosed</B>()</PRE>
<DL>
<DD>Returns true if <A HREF="../../../../../org/apache/tomcat/jdbc/pool/ConnectionPool.html#close(boolean)"><CODE>close</CODE></A> has been called, and the connection pool is unusable
<P>
<DD><DL>

<DT><B>Returns:</B><DD>boolean</DL>
</DD>
</DL>
<HR>

<A NAME="setupConnection(org.apache.tomcat.jdbc.pool.PooledConnection)"><!-- --></A><H3>
setupConnection</H3>
<PRE>
protected java.sql.Connection <B>setupConnection</B>(<A HREF="../../../../../org/apache/tomcat/jdbc/pool/PooledConnection.html" title="class in org.apache.tomcat.jdbc.pool">PooledConnection</A>&nbsp;con)
                                       throws java.sql.SQLException</PRE>
<DL>
<DD>configures a pooled connection as a proxy.
 This Proxy implements <CODE>Connection</CODE> and <CODE>PooledConnection</CODE> interfaces.
 All calls on <CODE>Connection</CODE> methods will be propagated down to the actual JDBC connection except for the
 <CODE>Connection.close()</CODE> method.
<P>
<DD><DL>
<DT><B>Parameters:</B><DD><CODE>con</CODE> - a <A HREF="../../../../../org/apache/tomcat/jdbc/pool/PooledConnection.html" title="class in org.apache.tomcat.jdbc.pool"><CODE>PooledConnection</CODE></A> to wrap in a Proxy
<DT><B>Returns:</B><DD>a <CODE>Connection</CODE> object wrapping a pooled connection.
<DT><B>Throws:</B>
<DD><CODE>java.sql.SQLException</CODE> - if an interceptor can't be configured, if the proxy can't be instantiated</DL>
</DD>
</DL>
<HR>

<A NAME="getProxyConstructor(boolean)"><!-- --></A><H3>
getProxyConstructor</H3>
<PRE>
public java.lang.reflect.Constructor&lt;?&gt; <B>getProxyConstructor</B>(boolean&nbsp;xa)
                                                     throws java.lang.NoSuchMethodException</PRE>
<DL>
<DD>Creates and caches a <CODE>Constructor</CODE> used to instantiate the proxy object.
 We cache this, since the creation of a constructor is fairly slow.
<P>
<DD><DL>

<DT><B>Returns:</B><DD>constructor used to instantiate the wrapper object
<DT><B>Throws:</B>
<DD><CODE>java.lang.NoSuchMethodException</CODE></DL>
</DD>
</DL>
<HR>

<A NAME="close(boolean)"><!-- --></A><H3>
close</H3>
<PRE>
protected void <B>close</B>(boolean&nbsp;force)</PRE>
<DL>
<DD>Closes the pool and all disconnects all idle connections
 Active connections will be closed upon the <CODE>close</CODE> method is called
 on the underlying connection instead of being returned to the pool
<P>
<DD><DL>
<DT><B>Parameters:</B><DD><CODE>force</CODE> - - true to even close the active connections</DL>
</DD>
</DL>
<HR>

<A NAME="init(org.apache.tomcat.jdbc.pool.PoolConfiguration)"><!-- --></A><H3>
init</H3>
<PRE>
protected void <B>init</B>(<A HREF="../../../../../org/apache/tomcat/jdbc/pool/PoolConfiguration.html" title="interface in org.apache.tomcat.jdbc.pool">PoolConfiguration</A>&nbsp;properties)
             throws java.sql.SQLException</PRE>
<DL>
<DD>Initialize the connection pool - called from the constructor
<P>
<DD><DL>
<DT><B>Parameters:</B><DD><CODE>properties</CODE> - PoolProperties - properties used to initialize the pool with
<DT><B>Throws:</B>
<DD><CODE>java.sql.SQLException</CODE> - if initialization fails</DL>
</DD>
</DL>
<HR>

<A NAME="initializePoolCleaner(org.apache.tomcat.jdbc.pool.PoolConfiguration)"><!-- --></A><H3>
initializePoolCleaner</H3>
<PRE>
public void <B>initializePoolCleaner</B>(<A HREF="../../../../../org/apache/tomcat/jdbc/pool/PoolConfiguration.html" title="interface in org.apache.tomcat.jdbc.pool">PoolConfiguration</A>&nbsp;properties)</PRE>
<DL>
<DD><DL>
</DL>
</DD>
</DL>
<HR>

<A NAME="abandon(org.apache.tomcat.jdbc.pool.PooledConnection)"><!-- --></A><H3>
abandon</H3>
<PRE>
protected void <B>abandon</B>(<A HREF="../../../../../org/apache/tomcat/jdbc/pool/PooledConnection.html" title="class in org.apache.tomcat.jdbc.pool">PooledConnection</A>&nbsp;con)</PRE>
<DL>
<DD>thread safe way to abandon a connection
 signals a connection to be abandoned.
 this will disconnect the connection, and log the stack trace if logAbanded=true
<P>
<DD><DL>
<DT><B>Parameters:</B><DD><CODE>con</CODE> - PooledConnection</DL>
</DD>
</DL>
<HR>

<A NAME="suspect(org.apache.tomcat.jdbc.pool.PooledConnection)"><!-- --></A><H3>
suspect</H3>
<PRE>
protected void <B>suspect</B>(<A HREF="../../../../../org/apache/tomcat/jdbc/pool/PooledConnection.html" title="class in org.apache.tomcat.jdbc.pool">PooledConnection</A>&nbsp;con)</PRE>
<DL>
<DD>thread safe way to abandon a connection
 signals a connection to be abandoned.
 this will disconnect the connection, and log the stack trace if logAbanded=true
<P>
<DD><DL>
<DT><B>Parameters:</B><DD><CODE>con</CODE> - PooledConnection</DL>
</DD>
</DL>
<HR>

<A NAME="release(org.apache.tomcat.jdbc.pool.PooledConnection)"><!-- --></A><H3>
release</H3>
<PRE>
protected void <B>release</B>(<A HREF="../../../../../org/apache/tomcat/jdbc/pool/PooledConnection.html" title="class in org.apache.tomcat.jdbc.pool">PooledConnection</A>&nbsp;con)</PRE>
<DL>
<DD>thread safe way to release a connection
<P>
<DD><DL>
<DT><B>Parameters:</B><DD><CODE>con</CODE> - PooledConnection</DL>
</DD>
</DL>
<HR>

<A NAME="borrowConnection(int, java.lang.String, java.lang.String)"><!-- --></A><H3>
borrowConnection</H3>
<PRE>
private <A HREF="../../../../../org/apache/tomcat/jdbc/pool/PooledConnection.html" title="class in org.apache.tomcat.jdbc.pool">PooledConnection</A> <B>borrowConnection</B>(int&nbsp;wait,
                                          java.lang.String&nbsp;username,
                                          java.lang.String&nbsp;password)
                                   throws java.sql.SQLException</PRE>
<DL>
<DD>Thread safe way to retrieve a connection from the pool
<P>
<DD><DL>
<DT><B>Parameters:</B><DD><CODE>wait</CODE> - - time to wait, overrides the maxWait from the properties,
 set to -1 if you wish to use maxWait, 0 if you wish no wait time.
<DT><B>Returns:</B><DD>PooledConnection
<DT><B>Throws:</B>
<DD><CODE>java.sql.SQLException</CODE></DL>
</DD>
</DL>
<HR>

<A NAME="createConnection(long, org.apache.tomcat.jdbc.pool.PooledConnection, java.lang.String, java.lang.String)"><!-- --></A><H3>
createConnection</H3>
<PRE>
protected <A HREF="../../../../../org/apache/tomcat/jdbc/pool/PooledConnection.html" title="class in org.apache.tomcat.jdbc.pool">PooledConnection</A> <B>createConnection</B>(long&nbsp;now,
                                            <A HREF="../../../../../org/apache/tomcat/jdbc/pool/PooledConnection.html" title="class in org.apache.tomcat.jdbc.pool">PooledConnection</A>&nbsp;notUsed,
                                            java.lang.String&nbsp;username,
                                            java.lang.String&nbsp;password)
                                     throws java.sql.SQLException</PRE>
<DL>
<DD>Creates a JDBC connection and tries to connect to the database.
<P>
<DD><DL>
<DT><B>Parameters:</B><DD><CODE>now</CODE> - timestamp of when this was called<DD><CODE>notUsed</CODE> - Argument not used
<DT><B>Returns:</B><DD>a PooledConnection that has been connected
<DT><B>Throws:</B>
<DD><CODE>java.sql.SQLException</CODE></DL>
</DD>
</DL>
<HR>

<A NAME="borrowConnection(long, org.apache.tomcat.jdbc.pool.PooledConnection, java.lang.String, java.lang.String)"><!-- --></A><H3>
borrowConnection</H3>
<PRE>
protected <A HREF="../../../../../org/apache/tomcat/jdbc/pool/PooledConnection.html" title="class in org.apache.tomcat.jdbc.pool">PooledConnection</A> <B>borrowConnection</B>(long&nbsp;now,
                                            <A HREF="../../../../../org/apache/tomcat/jdbc/pool/PooledConnection.html" title="class in org.apache.tomcat.jdbc.pool">PooledConnection</A>&nbsp;con,
                                            java.lang.String&nbsp;username,
                                            java.lang.String&nbsp;password)
                                     throws java.sql.SQLException</PRE>
<DL>
<DD>Validates and configures a previously idle connection
<P>
<DD><DL>
<DT><B>Parameters:</B><DD><CODE>now</CODE> - - timestamp<DD><CODE>con</CODE> - - the connection to validate and configure
<DT><B>Returns:</B><DD>con
<DT><B>Throws:</B>
<DD><CODE>java.sql.SQLException</CODE> - if a validation error happens</DL>
</DD>
</DL>
<HR>

<A NAME="terminateTransaction(org.apache.tomcat.jdbc.pool.PooledConnection)"><!-- --></A><H3>
terminateTransaction</H3>
<PRE>
protected boolean <B>terminateTransaction</B>(<A HREF="../../../../../org/apache/tomcat/jdbc/pool/PooledConnection.html" title="class in org.apache.tomcat.jdbc.pool">PooledConnection</A>&nbsp;con)</PRE>
<DL>
<DD>Terminate the current transaction for the given connection.
<P>
<DD><DL>
<DT><B>Parameters:</B><DD><CODE>con</CODE> - 
<DT><B>Returns:</B><DD><code>true</code> if the connection TX termination succeeded
         otherwise <code>false</code></DL>
</DD>
</DL>
<HR>

<A NAME="shouldClose(org.apache.tomcat.jdbc.pool.PooledConnection, int)"><!-- --></A><H3>
shouldClose</H3>
<PRE>
protected boolean <B>shouldClose</B>(<A HREF="../../../../../org/apache/tomcat/jdbc/pool/PooledConnection.html" title="class in org.apache.tomcat.jdbc.pool">PooledConnection</A>&nbsp;con,
                              int&nbsp;action)</PRE>
<DL>
<DD>Determines if a connection should be closed upon return to the pool.
<P>
<DD><DL>
<DT><B>Parameters:</B><DD><CODE>con</CODE> - - the connection<DD><CODE>action</CODE> - - the validation action that should be performed
<DT><B>Returns:</B><DD>true if the connection should be closed</DL>
</DD>
</DL>
<HR>

<A NAME="returnConnection(org.apache.tomcat.jdbc.pool.PooledConnection)"><!-- --></A><H3>
returnConnection</H3>
<PRE>
protected void <B>returnConnection</B>(<A HREF="../../../../../org/apache/tomcat/jdbc/pool/PooledConnection.html" title="class in org.apache.tomcat.jdbc.pool">PooledConnection</A>&nbsp;con)</PRE>
<DL>
<DD>Returns a connection to the pool
 If the pool is closed, the connection will be released
 If the connection is not part of the busy queue, it will be released.
 If <A HREF="../../../../../org/apache/tomcat/jdbc/pool/PoolProperties.html#testOnReturn"><CODE>PoolProperties.testOnReturn</CODE></A> is set to true it will be validated
<P>
<DD><DL>
<DT><B>Parameters:</B><DD><CODE>con</CODE> - PooledConnection to be returned to the pool</DL>
</DD>
</DL>
<HR>

<A NAME="shouldAbandon()"><!-- --></A><H3>
shouldAbandon</H3>
<PRE>
protected boolean <B>shouldAbandon</B>()</PRE>
<DL>
<DD>Determines if a connection should be abandoned based on
 <A HREF="../../../../../org/apache/tomcat/jdbc/pool/PoolProperties.html#abandonWhenPercentageFull"><CODE>PoolProperties.abandonWhenPercentageFull</CODE></A> setting.
<P>
<DD><DL>

<DT><B>Returns:</B><DD>true if the connection should be abandoned</DL>
</DD>
</DL>
<HR>

<A NAME="checkAbandoned()"><!-- --></A><H3>
checkAbandoned</H3>
<PRE>
public void <B>checkAbandoned</B>()</PRE>
<DL>
<DD>Iterates through all the busy connections and checks for connections that have timed out
<P>
<DD><DL>
</DL>
</DD>
</DL>
<HR>

<A NAME="checkIdle()"><!-- --></A><H3>
checkIdle</H3>
<PRE>
public void <B>checkIdle</B>()</PRE>
<DL>
<DD>Iterates through the idle connections and resizes the idle pool based on parameters
 <A HREF="../../../../../org/apache/tomcat/jdbc/pool/PoolProperties.html#maxIdle"><CODE>PoolProperties.maxIdle</CODE></A>, <A HREF="../../../../../org/apache/tomcat/jdbc/pool/PoolProperties.html#minIdle"><CODE>PoolProperties.minIdle</CODE></A>, <A HREF="../../../../../org/apache/tomcat/jdbc/pool/PoolProperties.html#minEvictableIdleTimeMillis"><CODE>PoolProperties.minEvictableIdleTimeMillis</CODE></A>
<P>
<DD><DL>
</DL>
</DD>
</DL>
<HR>

<A NAME="checkIdle(boolean)"><!-- --></A><H3>
checkIdle</H3>
<PRE>
public void <B>checkIdle</B>(boolean&nbsp;ignoreMinSize)</PRE>
<DL>
<DD><DL>
</DL>
</DD>
</DL>
<HR>

<A NAME="shouldReleaseIdle(long, org.apache.tomcat.jdbc.pool.PooledConnection, long)"><!-- --></A><H3>
shouldReleaseIdle</H3>
<PRE>
protected boolean <B>shouldReleaseIdle</B>(long&nbsp;now,
                                    <A HREF="../../../../../org/apache/tomcat/jdbc/pool/PooledConnection.html" title="class in org.apache.tomcat.jdbc.pool">PooledConnection</A>&nbsp;con,
                                    long&nbsp;time)</PRE>
<DL>
<DD><DL>
</DL>
</DD>
</DL>
<HR>

<A NAME="testAllIdle()"><!-- --></A><H3>
testAllIdle</H3>
<PRE>
public void <B>testAllIdle</B>()</PRE>
<DL>
<DD>Forces a validation of all idle connections if <A HREF="../../../../../org/apache/tomcat/jdbc/pool/PoolProperties.html#testWhileIdle"><CODE>PoolProperties.testWhileIdle</CODE></A> is set.
<P>
<DD><DL>
</DL>
</DD>
</DL>
<HR>

<A NAME="getThreadDump()"><!-- --></A><H3>
getThreadDump</H3>
<PRE>
protected static java.lang.String <B>getThreadDump</B>()</PRE>
<DL>
<DD>Creates a stack trace representing the existing thread's current state.
<P>
<DD><DL>

<DT><B>Returns:</B><DD>a string object representing the current state.
 TODO investigate if we simply should store <CODE>Thread.getStackTrace()</CODE> elements</DL>
</DD>
</DL>
<HR>

<A NAME="getStackTrace(java.lang.Throwable)"><!-- --></A><H3>
getStackTrace</H3>
<PRE>
public static java.lang.String <B>getStackTrace</B>(java.lang.Throwable&nbsp;x)</PRE>
<DL>
<DD>Convert an exception into a String
<P>
<DD><DL>
<DT><B>Parameters:</B><DD><CODE>x</CODE> - - the throwable
<DT><B>Returns:</B><DD>a string representing the stack trace</DL>
</DD>
</DL>
<HR>

<A NAME="create(boolean)"><!-- --></A><H3>
create</H3>
<PRE>
protected <A HREF="../../../../../org/apache/tomcat/jdbc/pool/PooledConnection.html" title="class in org.apache.tomcat.jdbc.pool">PooledConnection</A> <B>create</B>(boolean&nbsp;incrementCounter)</PRE>
<DL>
<DD>Create a new pooled connection object. Not connected nor validated.
<P>
<DD><DL>

<DT><B>Returns:</B><DD>a pooled connection object</DL>
</DD>
</DL>
<HR>

<A NAME="purge()"><!-- --></A><H3>
purge</H3>
<PRE>
public void <B>purge</B>()</PRE>
<DL>
<DD>Purges all connections in the pool.
 For connections currently in use, these connections will be
 purged when returned on the pool. This call also
 purges connections that are idle and in the pool
 To only purge used/active connections see <A HREF="../../../../../org/apache/tomcat/jdbc/pool/ConnectionPool.html#purgeOnReturn()"><CODE>purgeOnReturn()</CODE></A>
<P>
<DD><DL>
</DL>
</DD>
</DL>
<HR>

<A NAME="purgeOnReturn()"><!-- --></A><H3>
purgeOnReturn</H3>
<PRE>
public void <B>purgeOnReturn</B>()</PRE>
<DL>
<DD>Purges connections when they are returned from the pool.
 This call does not purge idle connections until they are used.
 To purge idle connections see <A HREF="../../../../../org/apache/tomcat/jdbc/pool/ConnectionPool.html#purge()"><CODE>purge()</CODE></A>
<P>
<DD><DL>
</DL>
</DD>
</DL>
<HR>

<A NAME="finalize(org.apache.tomcat.jdbc.pool.PooledConnection)"><!-- --></A><H3>
finalize</H3>
<PRE>
protected void <B>finalize</B>(<A HREF="../../../../../org/apache/tomcat/jdbc/pool/PooledConnection.html" title="class in org.apache.tomcat.jdbc.pool">PooledConnection</A>&nbsp;con)</PRE>
<DL>
<DD>Hook to perform final actions on a pooled connection object once it has been disconnected and will be discarded
<P>
<DD><DL>
<DT><B>Parameters:</B><DD><CODE>con</CODE> - </DL>
</DD>
</DL>
<HR>

<A NAME="disconnectEvent(org.apache.tomcat.jdbc.pool.PooledConnection, boolean)"><!-- --></A><H3>
disconnectEvent</H3>
<PRE>
protected void <B>disconnectEvent</B>(<A HREF="../../../../../org/apache/tomcat/jdbc/pool/PooledConnection.html" title="class in org.apache.tomcat.jdbc.pool">PooledConnection</A>&nbsp;con,
                               boolean&nbsp;finalizing)</PRE>
<DL>
<DD>Hook to perform final actions on a pooled connection object once it has been disconnected and will be discarded
<P>
<DD><DL>
<DT><B>Parameters:</B><DD><CODE>con</CODE> - </DL>
</DD>
</DL>
<HR>

<A NAME="getJmxPool()"><!-- --></A><H3>
getJmxPool</H3>
<PRE>
public <A HREF="../../../../../org/apache/tomcat/jdbc/pool/jmx/ConnectionPool.html" title="class in org.apache.tomcat.jdbc.pool.jmx">ConnectionPool</A> <B>getJmxPool</B>()</PRE>
<DL>
<DD>Return the object that is potentially registered in JMX for notifications
<P>
<DD><DL>

<DT><B>Returns:</B><DD>the object implementing the <A HREF="../../../../../org/apache/tomcat/jdbc/pool/jmx/ConnectionPoolMBean.html" title="interface in org.apache.tomcat.jdbc.pool.jmx"><CODE>ConnectionPoolMBean</CODE></A> interface</DL>
</DD>
</DL>
<HR>

<A NAME="createMBean()"><!-- --></A><H3>
createMBean</H3>
<PRE>
protected void <B>createMBean</B>()</PRE>
<DL>
<DD>Create MBean object that can be registered.
<P>
<DD><DL>
</DL>
</DD>
</DL>
<HR>

<A NAME="registerCleaner(org.apache.tomcat.jdbc.pool.ConnectionPool.PoolCleaner)"><!-- --></A><H3>
registerCleaner</H3>
<PRE>
private static void <B>registerCleaner</B>(<A HREF="../../../../../org/apache/tomcat/jdbc/pool/ConnectionPool.PoolCleaner.html" title="class in org.apache.tomcat.jdbc.pool">ConnectionPool.PoolCleaner</A>&nbsp;cleaner)</PRE>
<DL>
<DD><DL>
</DL>
</DD>
</DL>
<HR>

<A NAME="unregisterCleaner(org.apache.tomcat.jdbc.pool.ConnectionPool.PoolCleaner)"><!-- --></A><H3>
unregisterCleaner</H3>
<PRE>
private static void <B>unregisterCleaner</B>(<A HREF="../../../../../org/apache/tomcat/jdbc/pool/ConnectionPool.PoolCleaner.html" title="class in org.apache.tomcat.jdbc.pool">ConnectionPool.PoolCleaner</A>&nbsp;cleaner)</PRE>
<DL>
<DD><DL>
</DL>
</DD>
</DL>
<HR>

<A NAME="getPoolCleaners()"><!-- --></A><H3>
getPoolCleaners</H3>
<PRE>
public static java.util.Set&lt;java.util.TimerTask&gt; <B>getPoolCleaners</B>()</PRE>
<DL>
<DD><DL>
</DL>
</DD>
</DL>
<HR>

<A NAME="getPoolVersion()"><!-- --></A><H3>
getPoolVersion</H3>
<PRE>
public long <B>getPoolVersion</B>()</PRE>
<DL>
<DD><DL>
</DL>
</DD>
</DL>
<HR>

<A NAME="getPoolTimer()"><!-- --></A><H3>
getPoolTimer</H3>
<PRE>
public static java.util.Timer <B>getPoolTimer</B>()</PRE>
<DL>
<DD><DL>
</DL>
</DD>
</DL>
<!-- ========= END OF CLASS DATA ========= -->
<HR>


<!-- ======= START OF BOTTOM NAVBAR ====== -->
<A NAME="navbar_bottom"><!-- --></A>
<A HREF="#skip-navbar_bottom" title="Skip navigation links"></A>
<TABLE BORDER="0" WIDTH="100%" CELLPADDING="1" CELLSPACING="0" SUMMARY="">
<TR>
<TD COLSPAN=2 BGCOLOR="#EEEEFF" CLASS="NavBarCell1">
<A NAME="navbar_bottom_firstrow"><!-- --></A>
<TABLE BORDER="0" CELLPADDING="0" CELLSPACING="3" SUMMARY="">
  <TR ALIGN="center" VALIGN="top">
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../../../overview-summary.html"><FONT CLASS="NavBarFont1"><B>Overview</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="package-summary.html"><FONT CLASS="NavBarFont1"><B>Package</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#FFFFFF" CLASS="NavBarCell1Rev"> &nbsp;<FONT CLASS="NavBarFont1Rev"><B>Class</B></FONT>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="class-use/ConnectionPool.html"><FONT CLASS="NavBarFont1"><B>Use</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="package-tree.html"><FONT CLASS="NavBarFont1"><B>Tree</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../../../deprecated-list.html"><FONT CLASS="NavBarFont1"><B>Deprecated</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../../../index-files/index-1.html"><FONT CLASS="NavBarFont1"><B>Index</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../../../help-doc.html"><FONT CLASS="NavBarFont1"><B>Help</B></FONT></A>&nbsp;</TD>
  </TR>
</TABLE>
</TD>
<TD ALIGN="right" VALIGN="top" ROWSPAN=3><EM>
</EM>
</TD>
</TR>

<TR>
<TD BGCOLOR="white" CLASS="NavBarCell2"><FONT SIZE="-2">
&nbsp;PREV CLASS&nbsp;
&nbsp;<A HREF="../../../../../org/apache/tomcat/jdbc/pool/ConnectionPool.ConnectionFuture.html" title="class in org.apache.tomcat.jdbc.pool"><B>NEXT CLASS</B></A></FONT></TD>
<TD BGCOLOR="white" CLASS="NavBarCell2"><FONT SIZE="-2">
  <A HREF="../../../../../index.html?org/apache/tomcat/jdbc/pool/ConnectionPool.html" target="_top"><B>FRAMES</B></A>  &nbsp;
&nbsp;<A HREF="ConnectionPool.html" target="_top"><B>NO FRAMES</B></A>  &nbsp;
&nbsp;<SCRIPT type="text/javascript">
  <!--
  if(window==top) {
    document.writeln('<A HREF="../../../../../allclasses-noframe.html"><B>All Classes</B></A>');
  }
  //-->
</SCRIPT>
<NOSCRIPT>
  <A HREF="../../../../../allclasses-noframe.html"><B>All Classes</B></A>
</NOSCRIPT>


</FONT></TD>
</TR>
<TR>
<TD VALIGN="top" CLASS="NavBarCell3"><FONT SIZE="-2">
  SUMMARY:&nbsp;<A HREF="#nested_class_summary">NESTED</A>&nbsp;|&nbsp;<A HREF="#field_summary">FIELD</A>&nbsp;|&nbsp;<A HREF="#constructor_summary">CONSTR</A>&nbsp;|&nbsp;<A HREF="#method_summary">METHOD</A></FONT></TD>
<TD VALIGN="top" CLASS="NavBarCell3"><FONT SIZE="-2">
DETAIL:&nbsp;<A HREF="#field_detail">FIELD</A>&nbsp;|&nbsp;<A HREF="#constructor_detail">CONSTR</A>&nbsp;|&nbsp;<A HREF="#method_detail">METHOD</A></FONT></TD>
</TR>
</TABLE>
<A NAME="skip-navbar_bottom"></A>
<!-- ======== END OF BOTTOM NAVBAR ======= -->

<HR>

</BODY>
</HTML>
